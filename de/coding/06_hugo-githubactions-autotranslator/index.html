<!doctype html><html lang=de dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kostenloser Hugo-Autotranslator f√ºr Github-Seiten | Matsch Web</title><meta name=keywords content><meta name=description content="Automatically translate your Hugo website and deploy it to Github Pages"><meta name=author content><link rel=canonical href=https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/><link crossorigin=anonymous href=/de/assets/css/stylesheet.3169e98bb03364f553cd6e8e9426e1cba7176bea37f88a108a28041fe7a1cb04.css integrity="sha256-MWnpi7AzZPVTzW6OlCbhy6cXa+o3+IoQiigEH+ehywQ=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.matschcode.de/de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.matschcode.de/de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.matschcode.de/de/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.matschcode.de/de/apple-touch-icon.png><link rel=mask-icon href=https://blog.matschcode.de/de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta property="og:image" content="https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/img1.png"><meta property="og:image:type" content="image/png/png"><meta property="og:image:width" content="768"><meta property="og:image:height" content="512"><link rel=alternate hreflang=de href=https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/><link rel=alternate hreflang=en href=https://blog.matschcode.de/en/coding/06_hugo-githubactions-autotranslator/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/"><meta property="og:site_name" content="Matsch Web"><meta property="og:title" content="Kostenloser Hugo-Autotranslator f√ºr Github-Seiten"><meta property="og:description" content="Automatically translate your Hugo website and deploy it to Github Pages"><meta property="og:locale" content="de"><meta property="og:type" content="article"><meta property="article:section" content="coding"><meta property="article:published_time" content="2025-06-26T00:00:00+00:00"><meta property="article:modified_time" content="2025-06-26T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kostenloser Hugo-Autotranslator f√ºr Github-Seiten"><meta name=twitter:description content="Automatically translate your Hugo website and deploy it to Github Pages"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Kodierung","item":"https://blog.matschcode.de/de/coding/"},{"@type":"ListItem","position":2,"name":"Kostenloser Hugo-Autotranslator f√ºr Github-Seiten","item":"https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kostenloser Hugo-Autotranslator f√ºr Github-Seiten","name":"Kostenloser Hugo-Autotranslator f√ºr Github-Seiten","description":"Automatically translate your Hugo website and deploy it to Github Pages","keywords":[],"articleBody":"\nDas Problem und die Idee Ich m√∂chte einen Blog-Beitrag auf Englisch oder Deutsch schreiben, und ich m√∂chte ihn nicht jedes Mal jedes Mal manuell √ºbersetzen. Das ist viel einfacher zu pflegen und nat√ºrlich viel weniger l√§stig.\nDie Idee ist also, diesen √úbersetzungsprozess zu automatisieren. Es soll also automatisch erkannt werden, ob der Beitrag in Deutsch oder Englisch verfasst ist und in die jeweils andere Sprache.\nIch m√∂chte Github Actions verwenden, um vor der Bereitstellung zu √ºbersetzen. Hierf√ºr m√∂chte ich einen kostenlosen √úbersetzungsdienst nutzen.\nDie √úbersetzungsm√∂glichkeiten Es gibt viele M√∂glichkeiten, Text mit Code zu √ºbersetzen. Die meisten von ihnen sind nicht kostenlos oder haben eine begrenzte L√§nge an Zeichen. Zum Beispiel die API-Schnittstelle von bekannten √úbersetzungsdiensten wie DeepL API, oder KI-Dienste wie OpenAI (die einen kostenpflichtigen API-Schl√ºssel erfordern).\nGoogletrans F√ºr den ersten Start m√∂chte ich mit einer kostenlosen Version arbeiten. Zu diesem Zweck habe ich das freie Python-Paket googletrans. Es ist eigentlich veraltet, aber es funktioniert noch mit Python 3.12. Das ist in meinem Fall in Ordnung, denn ich kann es in Github Actions unter Verwendung einer alten Umgebung ausf√ºhren kann.\nHugo mehrsprachiger Modus Um eine mehrsprachige Website zu realisieren, muss Hugo im mehrsprachigen Modus vorbereitet werden. Die Haupteinstellung wird in der hugo.toml vorgenommen. In meinem Fall funktioniert es am besten wie folgt:\ntitle = 'Website title' theme = 'PaperMod' defaultContentLanguage = \"de\" defaultContentLanguageInSubdir = true enableMissingTranslationPlaceholders = true [languages] [languages.de] baseURL = 'https://.github.io//de' languageName = \"Deutsch\" weight = 1 contentDir = \"content\" [languages.en] baseURL = 'https://.github.io//en' languageName = \"English\" weight = 2 contentDir = \"content\" Die Markdown-Dateien werden wie folgt erzeugt:\ncontent - post1 -- index.md (original file) -- index.en.md -- index.de.md - post2 -- index.md (original file) -- index.en.md -- index.de.md So wird √ºbersetzt Realisierung der automatischen √úbersetzung mit Github Actions und Python\nEinrichtung der √úbersetzungsumgebung im Github Actions Workflow Der erste Teil der Arbeit mit Github Actions besteht darin, eine Python 3.12-Umgebung einzurichten und die Installation der erforderlichen Abh√§ngigkeiten. Der zweite Teil besteht darin, das eigentliche √úbersetzungsskript in Python auszuf√ºhren und die √úbergabe der neuen, generierten Markdown-Dateien.\nDer zweite Job ist das Deployment in das √∂ffentliche Verzeichnis (in dem sich die hugo html-Dateien) in den gh-pages-Zweig, der in Github Pages verwendet werden kann.\njobs: translate: runs-on: ubuntu-24.04 steps: - uses: actions/checkout@v4 - name: Set up Python uses: actions/setup-python@v4 with: python-version: '3.12' - name: Install dependencies run: pip install requests python-frontmatter langdetect googletrans==4.0.0-rc1 - name: Translate Markdown files run: python scripts/translate_markdown.py - name: Commit translated files run: | git config user.name \"github-actions\" git config user.email \"github-actions@users.noreply.github.com\" git add content/ git diff --cached --quiet || git commit -m \"Auto-translated markdown files\" git push continue-on-error: true deploy: runs-on: ubuntu-22.04 needs: translate env: HUGO_CACHEDIR: /tmp/hugo_cache concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v4 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: 'latest' extended: true - name: Define cache uses: actions/cache@v4 with: path: ${{ env.HUGO_CACHEDIR }} key: ${{ runner.os }}-hugomod-${{ hashFiles('**/go.sum') }} restore-keys: | ${{ runner.os }}-hugomod- - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == 'refs/heads/main' with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public Automatische √úbersetzung Das √úbersetzungsskript besteht aus den folgenden Hauptbestandteilen:\nFinden von Markdown-Dateien Pr√ºfen, ob Dateien ge√§ndert wurden (Hash-Check) Identifizierung der Sprache der Markdown-Datei Ersetzen von Codebl√∂cken, Shortcodes, Urls, ‚Ä¶ durch Platzhalter (Maskierung) √úbersetzen Demaskieren von Platzhaltern √úbersetzten Text in neuen Dateien speichern import frontmatter import hashlib import re from langdetect import detect from pathlib import Path import shutil from googletrans import Translator LANGS = {\"de\", \"en\"} BASE_PATH = Path(\"content\") translator = Translator() def hash_text(text: str) -\u003e str: return hashlib.sha256(text.encode(\"utf-8\")).hexdigest() def translate(text: str, source: str, target: str) -\u003e str: try: result = translator.translate(text, src=source, dest=target) return result.text except Exception as e: print(f\"Translation failed: {e}\") return \"\" def mask_placeholders(text): placeholders = {} placeholder_id = 0 def add_placeholder(match): nonlocal placeholder_id ph = f\"[[000001100000{placeholder_id}]]\" placeholders[ph] = match.group(0) placeholder_id += 1 return ph # Mask code blocks text = re.sub(r\"```.*?```\", add_placeholder, text, flags=re.DOTALL) # Mask inline code text = re.sub(r\"`[^`]+`\", add_placeholder, text) # Mask full markdown links and images text = re.sub(r\"!\\[[^\\]]*\\]\\([^)]+\\)\", add_placeholder, text) # images text = re.sub(r\"\\[[^\\]]+\\]\\([^)]+\\)\", add_placeholder, text) # links # Mask Hugo shortcodes text = re.sub(r\"\\{\\{\\s*[\u003c%].*?[\u003e%]\\s*\\}\\}\", add_placeholder, text, flags=re.DOTALL) # Mask **_** text = re.sub(r\"\\*\\*(.*?)\\*\\*\", add_placeholder, text, flags=re.DOTALL) return text, placeholders def unmask_placeholders(text, placeholders): for ph, original in placeholders.items(): text = text.replace(ph, original) return text for md_file in BASE_PATH.rglob(\"*.md\"): if md_file.suffix != \".md\": continue elif md_file.name.endswith((\".de.md\", \".en.md\")): continue # skip already translated files else: print(f\"file: {md_file}\") # Load base file post = frontmatter.load(md_file) content = post.content try: detected_lang = detect(content) except Exception as e: print(f\"Could not detect language for {md_file}: {e}\") continue if detected_lang not in LANGS: print(f\"Skipping {md_file}: unsupported language ({detected_lang})\") continue other_lang = \"en\" if detected_lang == \"de\" else \"de\" base_name = md_file.stem parent_dir = md_file.parent source_file = parent_dir / f\"{base_name}.{detected_lang}.md\" target_file = parent_dir / f\"{base_name}.{other_lang}.md\" post_hash = hash_text(content) # Skip if translated file exists AND content hash hasn't changed if target_file.exists(): existing_translated = frontmatter.load(target_file) if existing_translated.get(\"base_hash\") == post_hash: print(f\"‚úÖ Skipping {md_file}: translation up-to-date\") continue else: print(f\"üîÅ Updating translation for {md_file} ‚Üí {target_file}\") else: print(f\"üåç Translating {md_file} ‚Üí {target_file}\") # Copy base file to language-specific name if missing shutil.copy(md_file, source_file) print(f\"üìÑ Copied {md_file} ‚Üí {source_file}\") # Mask placeholders before translation masked_content, placeholders = mask_placeholders(content) # Translate masked content translated_masked_content = translate(masked_content, detected_lang, other_lang) if not translated_masked_content: print( f\"‚ö†Ô∏è Translation failed for {md_file} from {detected_lang} to {other_lang}, skipping.\" ) continue # Unmask placeholders in translated content translated_content = unmask_placeholders(translated_masked_content, placeholders) # Prepare translated post with metadata and base_hash translated_post = frontmatter.Post(translated_content, **post.metadata) translated_post[\"base_hash\"] = post_hash # Translate title if exists if \"title\" in post.metadata: translated_title = translate(post.metadata[\"title\"], detected_lang, other_lang) if translated_title: translated_post[\"title\"] = translated_title # Save translated file with open(target_file, \"w\", encoding=\"utf-8\") as f: f.write(frontmatter.dumps(translated_post)) print(f\"‚úÖ Translated and saved {target_file}\") Nachdem die neuen Dateien commited wurden. Der Push nach Main l√∂st einen neuen Hugo-Build aus.\n","wordCount":"984","inLanguage":"de","datePublished":"2025-06-26T00:00:00Z","dateModified":"2025-06-26T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/"},"publisher":{"@type":"Organization","name":"Matsch Web","logo":{"@type":"ImageObject","url":"https://blog.matschcode.de/de/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/css/nanogallery2.min.css></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.matschcode.de/de/ accesskey=h title="Matsch Web (Alt + H)">Matsch Web</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.matschcode.de/en/coding/06_hugo-githubactions-autotranslator/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://blog.matschcode.de/de/about/ title=About><span>About</span></a></li><li><a href=https://blog.matschcode.de/de/coding/ title=Coding><span>Coding</span></a></li><li><a href=https://blog.matschcode.de/de/travel/ title=Travel><span>Travel</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.matschcode.de/de/>Home</a>&nbsp;¬ª&nbsp;<a href=https://blog.matschcode.de/de/coding/>Kodierung</a></div><h1 class="post-title entry-hint-parent">Kostenloser Hugo-Autotranslator f√ºr Github-Seiten</h1><div class=post-description>Automatically translate your Hugo website and deploy it to Github Pages</div><div class=post-meta><span title='2025-06-26 00:00:00 +0000 UTC'>26. Juni 2025</span>&nbsp;¬∑&nbsp;<span>5 Minuten</span>&nbsp;|&nbsp;<span>√úbersetzungen:</span><ul class=i18n_list><li><a href=https://blog.matschcode.de/en/coding/06_hugo-githubactions-autotranslator/>En</a></li></ul></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Inhaltsverzeichnis</span></summary><div class=inner><ul><li><a href=#das-problem-und-die-idee aria-label="Das Problem und die Idee">Das Problem und die Idee</a></li><li><a href=#die-%c3%bcbersetzungsm%c3%b6glichkeiten aria-label="Die √úbersetzungsm√∂glichkeiten">Die √úbersetzungsm√∂glichkeiten</a><ul><li><a href=#googletrans aria-label=Googletrans>Googletrans</a></li></ul></li><li><a href=#hugo-mehrsprachiger-modus aria-label="Hugo mehrsprachiger Modus">Hugo mehrsprachiger Modus</a></li><li><a href=#so-wird-%c3%bcbersetzt aria-label="So wird √ºbersetzt">So wird √ºbersetzt</a><ul><li><a href=#einrichtung-der-%c3%bcbersetzungsumgebung-im-github-actions-workflow aria-label="Einrichtung der √úbersetzungsumgebung im Github Actions Workflow">Einrichtung der √úbersetzungsumgebung im Github Actions Workflow</a></li><li><a href=#automatische-%c3%bcbersetzung aria-label="Automatische √úbersetzung">Automatische √úbersetzung</a></li></ul></li></ul></div></details></div><div class=post-content><p><img alt=header-image loading=lazy src=/de/coding/06_hugo-githubactions-autotranslator/img1.png></p><h2 id=das-problem-und-die-idee>Das Problem und die Idee<a hidden class=anchor aria-hidden=true href=#das-problem-und-die-idee>#</a></h2><p>Ich m√∂chte einen Blog-Beitrag auf Englisch oder Deutsch schreiben, und ich m√∂chte ihn nicht jedes Mal
jedes Mal manuell √ºbersetzen. Das ist viel einfacher zu pflegen und nat√ºrlich viel weniger
l√§stig.</p><p>Die Idee ist also, diesen √úbersetzungsprozess zu automatisieren. Es soll also
automatisch erkannt werden, ob der Beitrag in Deutsch oder Englisch verfasst ist und
in die jeweils andere Sprache.</p><p>Ich m√∂chte Github Actions verwenden, um vor der Bereitstellung zu √ºbersetzen.
Hierf√ºr m√∂chte ich einen kostenlosen √úbersetzungsdienst nutzen.</p><h2 id=die-√ºbersetzungsm√∂glichkeiten>Die √úbersetzungsm√∂glichkeiten<a hidden class=anchor aria-hidden=true href=#die-√ºbersetzungsm√∂glichkeiten>#</a></h2><p>Es gibt viele M√∂glichkeiten, Text mit Code zu √ºbersetzen.
Die meisten von ihnen sind nicht kostenlos oder haben eine begrenzte L√§nge an Zeichen.
Zum Beispiel die API-Schnittstelle von bekannten √úbersetzungsdiensten wie <a href=https://www.deepl.com/en/pro#developer>DeepL API</a>,
oder KI-Dienste wie OpenAI (die einen kostenpflichtigen API-Schl√ºssel erfordern).</p><h3 id=googletrans>Googletrans<a hidden class=anchor aria-hidden=true href=#googletrans>#</a></h3><p>F√ºr den ersten Start m√∂chte ich mit einer kostenlosen Version arbeiten. Zu diesem Zweck habe ich das
freie Python-Paket googletrans. Es ist eigentlich veraltet, aber es funktioniert noch
mit Python 3.12. Das ist in meinem Fall in Ordnung, denn ich kann es in Github Actions
unter Verwendung einer alten Umgebung ausf√ºhren kann.</p><h2 id=hugo-mehrsprachiger-modus>Hugo mehrsprachiger Modus<a hidden class=anchor aria-hidden=true href=#hugo-mehrsprachiger-modus>#</a></h2><p>Um eine mehrsprachige Website zu realisieren, muss Hugo im mehrsprachigen
Modus vorbereitet werden.
Die Haupteinstellung wird in der <code>hugo.toml</code> vorgenommen.
In meinem Fall funktioniert es am besten wie folgt:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#39;Website title&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>theme</span> = <span style=color:#e6db74>&#39;PaperMod&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>defaultContentLanguage</span> = <span style=color:#e6db74>&#34;de&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>defaultContentLanguageInSubdir</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>enableMissingTranslationPlaceholders</span> = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>languages</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>languages</span>.<span style=color:#a6e22e>de</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#39;https://&lt;githubUsername&gt;.github.io/&lt;reponame&gt;/de&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>languageName</span> = <span style=color:#e6db74>&#34;Deutsch&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>contentDir</span> = <span style=color:#e6db74>&#34;content&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>languages</span>.<span style=color:#a6e22e>en</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>baseURL</span> = <span style=color:#e6db74>&#39;https://&lt;githubUsername&gt;.github.io/&lt;reponame&gt;/en&#39;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>languageName</span> = <span style=color:#e6db74>&#34;English&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>weight</span> = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>contentDir</span> = <span style=color:#e6db74>&#34;content&#34;</span>
</span></span></code></pre></div><p>Die Markdown-Dateien werden wie folgt erzeugt:</p><pre tabindex=0><code>content
- post1
-- index.md (original file)
-- index.en.md
-- index.de.md
- post2
-- index.md (original file)
-- index.en.md
-- index.de.md
</code></pre><h2 id=so-wird-√ºbersetzt>So wird √ºbersetzt<a hidden class=anchor aria-hidden=true href=#so-wird-√ºbersetzt>#</a></h2><p>Realisierung der automatischen √úbersetzung mit Github Actions und Python</p><h3 id=einrichtung-der-√ºbersetzungsumgebung-im-github-actions-workflow>Einrichtung der √úbersetzungsumgebung im Github Actions Workflow<a hidden class=anchor aria-hidden=true href=#einrichtung-der-√ºbersetzungsumgebung-im-github-actions-workflow>#</a></h3><p>Der erste Teil der Arbeit mit Github Actions besteht darin, eine Python 3.12-Umgebung einzurichten
und die Installation der erforderlichen Abh√§ngigkeiten.
Der zweite Teil besteht darin, das eigentliche √úbersetzungsskript in Python auszuf√ºhren und
die √úbergabe der neuen, generierten Markdown-Dateien.</p><p>Der zweite Job ist das Deployment in das √∂ffentliche Verzeichnis (in dem sich die
hugo html-Dateien) in den gh-pages-Zweig, der in Github Pages verwendet werden kann.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>translate</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-24.04</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set up Python</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-python@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>python-version</span>: <span style=color:#e6db74>&#39;3.12&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Install dependencies</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>pip install requests python-frontmatter langdetect googletrans==4.0.0-rc1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Translate Markdown files</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>python scripts/translate_markdown.py</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Commit translated files</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.name &#34;github-actions&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git config user.email &#34;github-actions@users.noreply.github.com&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git add content/
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git diff --cached --quiet || git commit -m &#34;Auto-translated markdown files&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          git push</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>continue-on-error</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-22.04</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>needs</span>: <span style=color:#ae81ff>translate</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>HUGO_CACHEDIR</span>: <span style=color:#ae81ff>/tmp/hugo_cache</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>concurrency</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>group</span>: <span style=color:#ae81ff>${{ github.workflow }}-${{ github.ref }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Define cache</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/cache@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>path</span>: <span style=color:#ae81ff>${{ env.HUGO_CACHEDIR }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>key</span>: <span style=color:#ae81ff>${{ runner.os }}-hugomod-${{ hashFiles(&#39;**/go.sum&#39;) }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>restore-keys</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ${{ runner.os }}-hugomod-</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><h3 id=automatische-√ºbersetzung>Automatische √úbersetzung<a hidden class=anchor aria-hidden=true href=#automatische-√ºbersetzung>#</a></h3><p>Das √úbersetzungsskript besteht aus den folgenden Hauptbestandteilen:</p><ul><li>Finden von Markdown-Dateien</li><li>Pr√ºfen, ob Dateien ge√§ndert wurden (Hash-Check)</li><li>Identifizierung der Sprache der Markdown-Datei</li><li>Ersetzen von Codebl√∂cken, Shortcodes, Urls, &mldr; durch Platzhalter (Maskierung)</li><li>√úbersetzen</li><li>Demaskieren von Platzhaltern</li><li>√úbersetzten Text in neuen Dateien speichern</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style=display:flex><span><span style=color:#f92672>import</span> frontmatter
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> hashlib
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> langdetect <span style=color:#f92672>import</span> detect
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pathlib <span style=color:#f92672>import</span> Path
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> shutil
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> googletrans <span style=color:#f92672>import</span> Translator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>LANGS <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;de&#34;</span>, <span style=color:#e6db74>&#34;en&#34;</span>}
</span></span><span style=display:flex><span>BASE_PATH <span style=color:#f92672>=</span> Path(<span style=color:#e6db74>&#34;content&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>translator <span style=color:#f92672>=</span> Translator()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hash_text</span>(text: str) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> hashlib<span style=color:#f92672>.</span>sha256(text<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))<span style=color:#f92672>.</span>hexdigest()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>translate</span>(text: str, source: str, target: str) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        result <span style=color:#f92672>=</span> translator<span style=color:#f92672>.</span>translate(text, src<span style=color:#f92672>=</span>source, dest<span style=color:#f92672>=</span>target)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> result<span style=color:#f92672>.</span>text
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Translation failed: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>mask_placeholders</span>(text):
</span></span><span style=display:flex><span>    placeholders <span style=color:#f92672>=</span> {}
</span></span><span style=display:flex><span>    placeholder_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>add_placeholder</span>(<span style=color:#66d9ef>match</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>nonlocal</span> placeholder_id
</span></span><span style=display:flex><span>        ph <span style=color:#f92672>=</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;[[000001100000</span><span style=color:#e6db74>{</span>placeholder_id<span style=color:#e6db74>}</span><span style=color:#e6db74>]]&#34;</span>
</span></span><span style=display:flex><span>        placeholders[ph] <span style=color:#f92672>=</span> <span style=color:#66d9ef>match</span><span style=color:#f92672>.</span>group(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        placeholder_id <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ph
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask code blocks</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;```.*?```&#34;</span>, add_placeholder, text, flags<span style=color:#f92672>=</span>re<span style=color:#f92672>.</span>DOTALL)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask inline code</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;`[^`]+`&#34;</span>, add_placeholder, text)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask full markdown links and images</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;!\[[^\]]*\]\([^)]+\)&#34;</span>, add_placeholder, text)  <span style=color:#75715e># images</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\[[^\]]+\]\([^)]+\)&#34;</span>, add_placeholder, text)  <span style=color:#75715e># links</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask Hugo shortcodes</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\{\{\s*[&lt;%].*?[&gt;%]\s*\}\}&#34;</span>, add_placeholder, text, flags<span style=color:#f92672>=</span>re<span style=color:#f92672>.</span>DOTALL)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask **_**</span>
</span></span><span style=display:flex><span>    text <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>sub(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;\*\*(.*?)\*\*&#34;</span>, add_placeholder, text, flags<span style=color:#f92672>=</span>re<span style=color:#f92672>.</span>DOTALL)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> text, placeholders
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>unmask_placeholders</span>(text, placeholders):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> ph, original <span style=color:#f92672>in</span> placeholders<span style=color:#f92672>.</span>items():
</span></span><span style=display:flex><span>        text <span style=color:#f92672>=</span> text<span style=color:#f92672>.</span>replace(ph, original)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> text
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> md_file <span style=color:#f92672>in</span> BASE_PATH<span style=color:#f92672>.</span>rglob(<span style=color:#e6db74>&#34;*.md&#34;</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> md_file<span style=color:#f92672>.</span>suffix <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;.md&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> md_file<span style=color:#f92672>.</span>name<span style=color:#f92672>.</span>endswith((<span style=color:#e6db74>&#34;.de.md&#34;</span>, <span style=color:#e6db74>&#34;.en.md&#34;</span>)):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>  <span style=color:#75715e># skip already translated files</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;file: </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Load base file</span>
</span></span><span style=display:flex><span>    post <span style=color:#f92672>=</span> frontmatter<span style=color:#f92672>.</span>load(md_file)
</span></span><span style=display:flex><span>    content <span style=color:#f92672>=</span> post<span style=color:#f92672>.</span>content
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>        detected_lang <span style=color:#f92672>=</span> detect(content)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Could not detect language for </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74>: </span><span style=color:#e6db74>{</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> detected_lang <span style=color:#f92672>not</span> <span style=color:#f92672>in</span> LANGS:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;Skipping </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74>: unsupported language (</span><span style=color:#e6db74>{</span>detected_lang<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    other_lang <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#66d9ef>if</span> detected_lang <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;de&#34;</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74>&#34;de&#34;</span>
</span></span><span style=display:flex><span>    base_name <span style=color:#f92672>=</span> md_file<span style=color:#f92672>.</span>stem
</span></span><span style=display:flex><span>    parent_dir <span style=color:#f92672>=</span> md_file<span style=color:#f92672>.</span>parent
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    source_file <span style=color:#f92672>=</span> parent_dir <span style=color:#f92672>/</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>base_name<span style=color:#e6db74>}</span><span style=color:#e6db74>.</span><span style=color:#e6db74>{</span>detected_lang<span style=color:#e6db74>}</span><span style=color:#e6db74>.md&#34;</span>
</span></span><span style=display:flex><span>    target_file <span style=color:#f92672>=</span> parent_dir <span style=color:#f92672>/</span> <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{</span>base_name<span style=color:#e6db74>}</span><span style=color:#e6db74>.</span><span style=color:#e6db74>{</span>other_lang<span style=color:#e6db74>}</span><span style=color:#e6db74>.md&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    post_hash <span style=color:#f92672>=</span> hash_text(content)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Skip if translated file exists AND content hash hasn&#39;t changed</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> target_file<span style=color:#f92672>.</span>exists():
</span></span><span style=display:flex><span>        existing_translated <span style=color:#f92672>=</span> frontmatter<span style=color:#f92672>.</span>load(target_file)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> existing_translated<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;base_hash&#34;</span>) <span style=color:#f92672>==</span> post_hash:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;‚úÖ Skipping </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74>: translation up-to-date&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üîÅ Updating translation for </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74> ‚Üí </span><span style=color:#e6db74>{</span>target_file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üåç Translating </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74> ‚Üí </span><span style=color:#e6db74>{</span>target_file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Copy base file to language-specific name if missing</span>
</span></span><span style=display:flex><span>    shutil<span style=color:#f92672>.</span>copy(md_file, source_file)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;üìÑ Copied </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74> ‚Üí </span><span style=color:#e6db74>{</span>source_file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Mask placeholders before translation</span>
</span></span><span style=display:flex><span>    masked_content, placeholders <span style=color:#f92672>=</span> mask_placeholders(content)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Translate masked content</span>
</span></span><span style=display:flex><span>    translated_masked_content <span style=color:#f92672>=</span> translate(masked_content, detected_lang, other_lang)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> translated_masked_content:
</span></span><span style=display:flex><span>        print(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;‚ö†Ô∏è Translation failed for </span><span style=color:#e6db74>{</span>md_file<span style=color:#e6db74>}</span><span style=color:#e6db74> from </span><span style=color:#e6db74>{</span>detected_lang<span style=color:#e6db74>}</span><span style=color:#e6db74> to </span><span style=color:#e6db74>{</span>other_lang<span style=color:#e6db74>}</span><span style=color:#e6db74>, skipping.&#34;</span>
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Unmask placeholders in translated content</span>
</span></span><span style=display:flex><span>    translated_content <span style=color:#f92672>=</span> unmask_placeholders(translated_masked_content, placeholders)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Prepare translated post with metadata and base_hash</span>
</span></span><span style=display:flex><span>    translated_post <span style=color:#f92672>=</span> frontmatter<span style=color:#f92672>.</span>Post(translated_content, <span style=color:#f92672>**</span>post<span style=color:#f92672>.</span>metadata)
</span></span><span style=display:flex><span>    translated_post[<span style=color:#e6db74>&#34;base_hash&#34;</span>] <span style=color:#f92672>=</span> post_hash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Translate title if exists</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#34;title&#34;</span> <span style=color:#f92672>in</span> post<span style=color:#f92672>.</span>metadata:
</span></span><span style=display:flex><span>        translated_title <span style=color:#f92672>=</span> translate(post<span style=color:#f92672>.</span>metadata[<span style=color:#e6db74>&#34;title&#34;</span>], detected_lang, other_lang)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> translated_title:
</span></span><span style=display:flex><span>            translated_post[<span style=color:#e6db74>&#34;title&#34;</span>] <span style=color:#f92672>=</span> translated_title
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Save translated file</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(target_file, <span style=color:#e6db74>&#34;w&#34;</span>, encoding<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf-8&#34;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        f<span style=color:#f92672>.</span>write(frontmatter<span style=color:#f92672>.</span>dumps(translated_post))
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;‚úÖ Translated and saved </span><span style=color:#e6db74>{</span>target_file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>)
</span></span></code></pre></div><p>Nachdem die neuen Dateien commited wurden. Der Push nach Main l√∂st einen neuen Hugo-Build aus.</p></div><footer class=post-footer><ul class=post-tags></ul><ul class=share-buttons>Share<li><button id=general-share aria-label="Share this link">
<svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor"><path d="M18 16.08c-.76.0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.52.47 1.2.77 1.96.77 1.66.0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.94 11.29C7.42 10.82 6.74 10.5 6 10.5c-1.66.0-3 1.34-3 3s1.34 3 3 3c.74.0 1.42-.32 1.94-.83l7.12 4.14c-.05.21-.08.43-.08.66.0 1.66 1.34 3 3 3s3-1.34 3-3-1.34-3-3-3z"/></svg></button></li></ul><script>document.getElementById("general-share").addEventListener("click",async()=>{const e={title:"Kostenloser Hugo-Autotranslator f√ºr Github-Seiten",text:"Kostenloser Hugo-Autotranslator f√ºr Github-Seiten",url:"https://blog.matschcode.de/de/coding/06_hugo-githubactions-autotranslator/"};if(navigator.share)try{await navigator.share(e),console.log("Successfully shared")}catch(e){console.log(`Error: ${e.message}`)}else try{await navigator.clipboard.writeText(e.url),alert("Link copied to clipboard!"),console.log("Link copied to clipboard")}catch(e){console.log(`Fallback failed: ${e.message}`)}})</script></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.matschcode.de/de/>Matsch Web</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js></script><script src=https://cdn.counter.dev/script.js data-id=ad3d8a1d-120c-4f64-a5cf-2ae40ee7113b data-utcoffset=2></script></body></html>