<!doctype html><html lang=de dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen | MatSch Web</title><meta name=keywords content="kubernetes,k3s,tailscale,vps"><meta name=description content="Route public web traffic through a VPS into a Tailscale-secured K3s cluster running in a private homelab."><meta name=author content><link rel=canonical href=https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/><link crossorigin=anonymous href=/de/assets/css/stylesheet.64d3743a7e35a5fe0e8aeebf460c23e9bd544d0457ddc54dd5d7c3a05fd0c665.css integrity="sha256-ZNN0On41pf4Oiu6/Rgwj6b1UTQRX3cVN1dfDoF/QxmU=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.matschcode.de/de/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.matschcode.de/de/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.matschcode.de/de/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.matschcode.de/de/apple-touch-icon.png><link rel=mask-icon href=https://blog.matschcode.de/de/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta property="og:image" content="https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png"><meta property="og:image:type" content="image/png/png"><meta property="og:image:width" content="1536"><meta property="og:image:height" content="1024"><link rel=alternate hreflang=de href=https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/><link rel=alternate hreflang=en href=https://blog.matschcode.de/en/blog/expose-k3s-services-via-vps/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/"><meta property="og:site_name" content="MatSch Web"><meta property="og:title" content="K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen"><meta property="og:description" content="Route public web traffic through a VPS into a Tailscale-secured K3s cluster running in a private homelab."><meta property="og:locale" content="de"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-12-21T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-21T00:00:00+00:00"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="K3s"><meta property="article:tag" content="Tailscale"><meta property="article:tag" content="Vps"><meta property="og:image" content="https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png"><meta name=twitter:title content="K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen"><meta name=twitter:description content="Route public web traffic through a VPS into a Tailscale-secured K3s cluster running in a private homelab."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://blog.matschcode.de/de/blog/"},{"@type":"ListItem","position":2,"name":"K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen","item":"https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen","name":"K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen","description":"Route public web traffic through a VPS into a Tailscale-secured K3s cluster running in a private homelab.","keywords":["kubernetes","k3s","tailscale","vps"],"articleBody":"Während meiner letzten Homelabbing-Sitzung stieß ich auf ein Problem, das sich zunächst als lästig erwies, sich aber schließlich in eine überraschend elegante Lösung verwandelte - eine, die es wert ist, geteilt zu werden.\nDas Problem Ich betreibe einen privaten Server in meiner Wohnung, auf dem verschiedene Homelab-Dienste gehostet werden. Dieser Server ist vom öffentlichen Internet aus nicht direkt zugänglich. Ich möchte meine internen Dienste privat und unter meiner Kontrolle halten.\nFür den Fernzugriff von unterwegs verwende ich Tailscale. Damit kann ich von meinem Telefon oder Laptop aus sicher auf Dienste wie paperless-ngx zugreifen, ohne etwas öffentlich preiszugeben. Bislang hat diese Einrichtung einwandfrei funktioniert.\nDie Situation änderte sich, als ich Nextcloud einrichtete. Im Gegensatz zu meinen anderen Diensten musste Nextcloud öffentlich zugänglich sein, damit ich Dateien mit Freunden und Familie teilen konnte.\nDie offensichtliche Lösung wäre gewesen:\nKonfigurieren Sie eine Portweiterleitung auf meiner Fritz!Box Eine Domain auf meine Heim-IP verweisen DynDNS hinzufügen, um IP-Änderungen zu verwalten Dieser Ansatz scheiterte jedoch schnell:\nIch wollte mein Heimnetzwerk nicht über Portweiterleitung preisgeben Mein DNS-Anbieter unterstützt keine DynDNS-Aktualisierungen Nachdem ich mich nach Alternativen umgesehen hatte, stellte ich fest, dass ich das fehlende Puzzlestück bereits hatte: einen VPS mit einer statischen öffentlichen IP.\nDas brachte mich auf die Idee: Warum nicht den VPS als öffentlichen Einstiegspunkt nutzen und den Datenverkehr sicher in mein Tailscale-Netzwerk weiterleiten, direkt zu meinem K3s-Cluster zu Hause?\nDie Lösung Die endgültige Architektur ist einfach, sicher und erstaunlich robust.\nWas ich bereits hatte Einen VPS mit einer statischen öffentlichen IP (siehe meinen anderen Beitrag über meinen VPS (Setup Coolify platform on your VPS) Coolify, das auf dem VPS als PaaS läuft Traefik als Reverse-Proxy, der von Coolify verwaltet wird Eine private Domain, die über A-Records auf die VPS-IP zeigt Tailscale ist auf beiden installiert: dem VPS dem Homelab K3s-Cluster Zu diesem Zeitpunkt waren der VPS und mein Homelab bereits Teil desselben Tailnets, d.h. sie konnten sicher kommunizieren, als ob sie sich im selben lokalen Netzwerk befänden.\nWas noch fehlte Damit dies durchgängig funktioniert, musste ich zwei Anpassungen vornehmen:\n1. Reverse-Proxy-Routing auf dem VPS Traefik (verwaltet von Coolify) musste Anfragen für eine bestimmte Domain an einen Dienst weiterleiten, der innerhalb meines privaten K3S-Clusters über Tailscale läuft. Hierfür muss die Datei /data/coolify/proxy/dynamic/coolify.yaml modifiziert werden:\n# add routes nextcloud-http: middlewares: - redirect-to-https entryPoints: - http service: nextcloud-service rule: Host(``) nextcloud-https: entryPoints: - https service: nextcloud-service rule: 'Host(``)' tls: certresolver: letsencrypt # add service nextcloud-service: loadBalancer: servers: - url: \"http://:\" # node Port of LoadBalancer service (see step 2) 2. Dienst-Exposition innerhalb von Kubernetes Anstatt einen Standard-Ingress für Nextcloud zu verwenden, habe ich auf einen LoadBalancer-Dienst umgestellt. Dies ermöglichte es Traefik auf dem VPS, den Datenverkehr über seine Tailscale-IP direkt an den Nextcloud-Pod weiterzuleiten.\nextraManifests: externalService: apiVersion: v1 kind: Service metadata: name: nextcloud-external-service namespace: nextcloud spec: type: LoadBalancer selector: app.kubernetes.io/component: app app.kubernetes.io/instance: nextcloud app.kubernetes.io/name: nextcloud ports: - protocol: TCP port: 8080 targetPort: 80 nodePort: # must be greater than 30000 Das Ergebnis Mit diesen Änderungen sieht der Verkehrsfluss wie folgt aus: ** [[00000110000013]] The phone can access nextcloud on my private domain from the internet but can not access paperless-ngx. From inside the tailnet, paperless-ngx is still available.\n[[00000110000014]] No port forwarding - No DynDNS - No public exposure of my home IP. [[00000110000015]]\nSummary By using a VPS as a public ingress point and combining it with Tailscale, I was able to expose a single service from my private homelab without compromising security or architecture cleanliness.\nDiese Konfiguration bietet:\nEine stabile öffentliche IP Sicheres privates Netzwerk über Tailscale Volle Kontrolle darüber, welche Dienste offengelegt werden Null eingehende Verbindungen zu meinem Heimnetzwerk ","wordCount":"596","inLanguage":"de","image":"https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png","datePublished":"2025-12-21T00:00:00Z","dateModified":"2025-12-21T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/"},"publisher":{"@type":"Organization","name":"MatSch Web","logo":{"@type":"ImageObject","url":"https://blog.matschcode.de/de/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/css/nanogallery2.min.css></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.matschcode.de/de/ accesskey=h title="MatSch Web (Alt + H)">MatSch Web</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.matschcode.de/en/ title=English aria-label=English>En</a></li></ul></div></div><ul id=menu><li><a href=https://blog.matschcode.de/de/projects/ title=Projects><span>Projects</span></a></li><li><a href=https://blog.matschcode.de/de/blog/ title=Blog><span>Blog</span></a></li><li><a href=https://blog.matschcode.de/de/travel/ title=Travel><span>Travel</span></a></li><li><a href=https://blog.matschcode.de/de/about/ title=About><span>About</span></a></li><li><a href=https://blog.matschcode.de/de/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.matschcode.de/de/>Home</a>&nbsp;»&nbsp;<a href=https://blog.matschcode.de/de/blog/>Blog</a></div><h1 class="post-title entry-hint-parent">K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen</h1><div class=post-description>Route public web traffic through a VPS into a Tailscale-secured K3s cluster running in a private homelab.</div><div class=post-meta><span title='2025-12-21 00:00:00 +0000 UTC'>21. Dezember 2025</span>&nbsp;·&nbsp;<span>3 Minuten</span>&nbsp;|&nbsp;<span>Übersetzungen:</span><ul class=i18n_list><li><a href=https://blog.matschcode.de/en/blog/expose-k3s-services-via-vps/>En</a></li></ul></div></header><figure class=entry-cover><img loading=eager srcset='https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps_hu_786a5db8827dce56.png 360w,https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps_hu_613203e99a179a22.png 480w,https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps_hu_a7bd747d1b149d87.png 720w,https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps_hu_5fd9d0b29fbf6823.png 1080w,https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps_hu_f7684d62867b2090.png 1500w,https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png 1536w' src=https://blog.matschcode.de/de/blog/expose-k3s-services-via-vps/expose-k3s-services-via-vps.png sizes="(min-width: 768px) 720px, 100vw" width=1536 height=1024 alt="Traffic flow from VPS to Tailscale-protected K3s cluster"><figcaption>Public traffic routed through a VPS into a private K3s homelab via Tailscale</figcaption></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Inhaltsverzeichnis</span></summary><div class=inner><ul><li><a href=#das-problem aria-label="Das Problem">Das Problem</a></li><li><a href=#die-l%c3%b6sung aria-label="Die Lösung">Die Lösung</a><ul><li><a href=#was-ich-bereits-hatte aria-label="Was ich bereits hatte">Was ich bereits hatte</a></li><li><a href=#was-noch-fehlte aria-label="Was noch fehlte">Was noch fehlte</a><ul><li><a href=#1-reverse-proxy-routing-auf-dem-vps aria-label="1. Reverse-Proxy-Routing auf dem VPS">1. Reverse-Proxy-Routing auf dem VPS</a></li><li><a href=#2-dienst-exposition-innerhalb-von-kubernetes aria-label="2. Dienst-Exposition innerhalb von Kubernetes">2. Dienst-Exposition innerhalb von Kubernetes</a></li></ul></li><li><a href=#das-ergebnis aria-label="Das Ergebnis">Das Ergebnis</a></li></ul></li><li><a href=#summary aria-label=Summary>Summary</a></li></ul></div></details></div><div class=post-content><p>Während meiner letzten Homelabbing-Sitzung stieß ich auf ein Problem, das sich zunächst als lästig erwies, sich aber schließlich in eine überraschend elegante Lösung verwandelte - eine, die es wert ist, geteilt zu werden.</p><h2 id=das-problem>Das Problem<a hidden class=anchor aria-hidden=true href=#das-problem>#</a></h2><p>Ich betreibe einen privaten Server in meiner Wohnung, auf dem verschiedene Homelab-Dienste gehostet werden. Dieser Server ist vom öffentlichen Internet aus nicht direkt zugänglich. Ich möchte meine internen Dienste privat und unter meiner Kontrolle halten.</p><p>Für den Fernzugriff von unterwegs verwende ich <a href=https://tailscale.com/>Tailscale</a>. Damit kann ich von meinem Telefon oder Laptop aus sicher auf Dienste wie <a href=https://github.com/paperless-ngx/paperless-ngx>paperless-ngx</a> zugreifen, ohne etwas öffentlich preiszugeben. Bislang hat diese Einrichtung einwandfrei funktioniert.</p><p>Die Situation änderte sich, als ich <a href=https://nextcloud.com/de/>Nextcloud</a> einrichtete. Im Gegensatz zu meinen anderen Diensten musste <a href=https://nextcloud.com/de/>Nextcloud</a> öffentlich zugänglich sein, damit ich Dateien mit Freunden und Familie teilen konnte.</p><p>Die offensichtliche Lösung wäre gewesen:</p><ul><li>Konfigurieren Sie eine Portweiterleitung auf meiner Fritz!Box</li><li>Eine Domain auf meine Heim-IP verweisen</li><li>DynDNS hinzufügen, um IP-Änderungen zu verwalten</li></ul><p>Dieser Ansatz scheiterte jedoch schnell:</p><ul><li>Ich wollte mein Heimnetzwerk nicht über Portweiterleitung preisgeben</li><li>Mein DNS-Anbieter unterstützt keine DynDNS-Aktualisierungen</li></ul><p>Nachdem ich mich nach Alternativen umgesehen hatte, stellte ich fest, dass ich das fehlende Puzzlestück bereits hatte:
einen VPS mit einer statischen öffentlichen IP.</p><p>Das brachte mich auf die Idee:
Warum nicht den VPS als öffentlichen Einstiegspunkt nutzen und den Datenverkehr sicher in mein <a href=https://tailscale.com/>Tailscale</a>-Netzwerk weiterleiten, direkt zu meinem K3s-Cluster zu Hause?</p><h2 id=die-lösung>Die Lösung<a hidden class=anchor aria-hidden=true href=#die-lösung>#</a></h2><p>Die endgültige Architektur ist einfach, sicher und erstaunlich robust.</p><h3 id=was-ich-bereits-hatte>Was ich bereits hatte<a hidden class=anchor aria-hidden=true href=#was-ich-bereits-hatte>#</a></h3><ul><li>Einen VPS mit einer statischen öffentlichen IP (siehe meinen anderen Beitrag über meinen VPS (<a href=https://blog.matschcode.de/en/projects/coolify-vps-setup/>Setup Coolify platform on your VPS</a>)</li><li><a href=https://coolify.io/>Coolify</a>, das auf dem VPS als PaaS läuft</li><li>Traefik als Reverse-Proxy, der von Coolify verwaltet wird</li><li>Eine private Domain, die über A-Records auf die VPS-IP zeigt</li><li>Tailscale ist auf beiden installiert:<ul><li>dem VPS</li><li>dem Homelab K3s-Cluster</li></ul></li></ul><p>Zu diesem Zeitpunkt waren der VPS und mein Homelab bereits Teil desselben Tailnets, d.h. sie konnten sicher kommunizieren, als ob sie sich im selben lokalen Netzwerk befänden.</p><h3 id=was-noch-fehlte>Was noch fehlte<a hidden class=anchor aria-hidden=true href=#was-noch-fehlte>#</a></h3><p>Damit dies durchgängig funktioniert, musste ich zwei Anpassungen vornehmen:</p><h4 id=1-reverse-proxy-routing-auf-dem-vps>1. Reverse-Proxy-Routing auf dem VPS<a hidden class=anchor aria-hidden=true href=#1-reverse-proxy-routing-auf-dem-vps>#</a></h4><p><a href=https://traefik.io/traefik>Traefik</a> (verwaltet von <a href=https://coolify.io/>Coolify</a>) musste Anfragen für eine bestimmte Domain an einen Dienst weiterleiten, der innerhalb meines privaten K3S-Clusters über <a href=https://tailscale.com/>Tailscale</a> läuft.
Hierfür muss die Datei <code>/data/coolify/proxy/dynamic/coolify.yaml</code> modifiziert werden:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># add routes</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>nextcloud-http</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>middlewares</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>redirect-to-https</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>entryPoints</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>service</span>: <span style=color:#ae81ff>nextcloud-service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>rule</span>: <span style=color:#ae81ff>Host(`&lt;yourdomain.com&gt;`)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>nextcloud-https</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>entryPoints</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>https</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>service</span>: <span style=color:#ae81ff>nextcloud-service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>rule</span>: <span style=color:#e6db74>&#39;Host(`&lt;yourdomain.com&gt;`)&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>tls</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>certresolver</span>: <span style=color:#ae81ff>letsencrypt</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span><span style=color:#75715e># add service</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>nextcloud-service</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>loadBalancer</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>servers</span>:
</span></span><span style=display:flex><span>          -
</span></span><span style=display:flex><span>            <span style=color:#f92672>url</span>: <span style=color:#e6db74>&#34;http://&lt;tailscale-ip&gt;:&lt;nodePort&gt;&#34;</span> <span style=color:#75715e># node Port of LoadBalancer service (see step 2)</span>
</span></span></code></pre></div><h4 id=2-dienst-exposition-innerhalb-von-kubernetes>2. Dienst-Exposition innerhalb von Kubernetes<a hidden class=anchor aria-hidden=true href=#2-dienst-exposition-innerhalb-von-kubernetes>#</a></h4><p>Anstatt einen Standard-Ingress für Nextcloud zu verwenden, habe ich auf einen LoadBalancer-Dienst umgestellt. Dies ermöglichte es Traefik auf dem VPS, den Datenverkehr über seine Tailscale-IP direkt an den Nextcloud-Pod weiterzuleiten.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>extraManifests</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>externalService</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>name</span>: <span style=color:#ae81ff>nextcloud-external-service</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>nextcloud</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>LoadBalancer</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>app.kubernetes.io/component</span>: <span style=color:#ae81ff>app</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>app.kubernetes.io/instance</span>: <span style=color:#ae81ff>nextcloud</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>app.kubernetes.io/name</span>: <span style=color:#ae81ff>nextcloud</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>targetPort</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>nodePort</span>: <span style=color:#ae81ff>&lt;nodePort&gt;</span> <span style=color:#75715e># must be greater than 30000</span>
</span></span></code></pre></div><h3 id=das-ergebnis>Das Ergebnis<a hidden class=anchor aria-hidden=true href=#das-ergebnis>#</a></h3><p>Mit diesen Änderungen sieht der Verkehrsfluss wie folgt aus: **
[[00000110000013]]
The phone can access nextcloud on my private domain from the internet but can not access paperless-ngx.
From inside the tailnet, paperless-ngx is still available.</p><p>[[00000110000014]]
No port forwarding - No DynDNS - No public exposure of my home IP.
[[00000110000015]]</p><h2 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h2><p>By using a VPS as a public ingress point and combining it with Tailscale, I was able to expose a single service from my private homelab without compromising security or architecture cleanliness.</p><p><strong>Diese Konfiguration bietet:</strong></p><ul><li>Eine stabile öffentliche IP</li><li>Sicheres privates Netzwerk über Tailscale</li><li>Volle Kontrolle darüber, welche Dienste offengelegt werden</li><li>Null eingehende Verbindungen zu meinem Heimnetzwerk</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.matschcode.de/de/tags/kubernetes/>Kubernetes</a></li><li><a href=https://blog.matschcode.de/de/tags/k3s/>K3s</a></li><li><a href=https://blog.matschcode.de/de/tags/tailscale/>Tailscale</a></li><li><a href=https://blog.matschcode.de/de/tags/vps/>Vps</a></li></ul><nav class=post-nav><a class=prev href=/de/blog/nextcloud-k3s-helm-deployment/>← Nextcloud K3S-Bereitstellung mit Helmdiagramm</a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on x" href="https://x.com/intent/tweet/?text=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen&amp;url=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f&amp;hashtags=kubernetes%2ck3s%2ctailscale%2cvps"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f&amp;title=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen&amp;summary=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen&amp;source=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f&title=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on whatsapp" href="https://api.whatsapp.com/send?text=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen%20-%20https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on telegram" href="https://telegram.me/share/url?text=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen&amp;url=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share K3s Dienste aus einem Tailscale-geschützten Homelab über einen VPS bereitstellen on ycombinator" href="https://news.ycombinator.com/submitlink?t=K3s%20Dienste%20aus%20einem%20Tailscale-gesch%c3%bctzten%20Homelab%20%c3%bcber%20einen%20VPS%20bereitstellen&u=https%3a%2f%2fblog.matschcode.de%2fde%2fblog%2fexpose-k3s-services-via-vps%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=matsch1/web data-repo-id=R_kgDOOj9vMw data-category=Announcements data-category-id=DIC_kwDOOj9vM84CzTmb data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_protanopia data-lang=en crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.matschcode.de/de/>MatSch Web</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script src=https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js></script><script src=https://cdn.counter.dev/script.js data-id=ad3d8a1d-120c-4f64-a5cf-2ae40ee7113b data-utcoffset=2></script></body></html>